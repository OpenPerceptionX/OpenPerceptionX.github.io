const track3data = [
    {
        team: "IEIT-AD",
        primary: "0.4890",
        metric1: "0.4605",
        metric2: "0.2541",
        country: "CN",
        institution: "IEIT<br>浪潮信息",
        award: "rank01",
        disqualified: false,
        links: "<a href='https://opendrivelab.github.io/Challenge%202024/occ_IEIT-AD.pdf' target='_blank'><img class='inlineimg' src='/assets/icon/article.png'/></a>&nbsp;<a href='https://youtu.be/tWFebTyBzXs' target='_blank'><img class='inlineimg' src='/assets/icon/youtube.png'/></a>"
    },
    {
        team: "SaicOcc",
        primary: "0.4457",
        metric1: "0.4307",
        metric2: "0.4193",
        country: "CN",
        institution: "SAIC<br>上汽集团",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "Huawei-Noah & CUHK-SZ",
        primary: "0.4265",
        metric1: "0.4320",
        metric2: "0.6236",
        country: "CN",
        institution: "Huawei / The Chinese University of Hong Kong, Shenzhen<br>华为 / 香港中文大学（深圳）",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "Harbour-Chips",
        primary: "0.4089",
        metric1: "0.3776",
        metric2: "0.3092",
        country: "CN",
        institution: "Xi'an Jiaotong University<br>西安交通大学",
        award: "rank02",
        disqualified: false,
        links: "<a href='https://opendrivelab.github.io/Challenge%202024/occ_Harbour-Chips.pdf' target='_blank'><img class='inlineimg' src='/assets/icon/article.png'/></a>"
    },
    {
        team: "GaussianOcc",
        primary: "0.4042",
        metric1: "0.4054",
        metric2: "0.6066",
        country: "CN",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "Mi-Robot",
        primary: "0.4041",
        metric1: "0.3835",
        metric2: "0.4105",
        country: "CN",
        institution: "Xiaomi Robot<br>小米机器人",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "ARM330",
        primary: "0.3567",
        metric1: "0.3286",
        metric2: "0.3909",
        country: "CN",
        institution: "Xiaomi<br>小米",
        award: "blank",
        disqualified: false,
        links: "<a href='https://opendrivelab.github.io/Challenge%202024/occ_ARM330.pdf' target='_blank'><img class='inlineimg' src='/assets/icon/article.png'/></a>"
    },
    {
        team: "CXZN & CUPT",
        primary: "0.3353",
        metric1: "0.3057",
        metric2: "0.3981",
        country: "CN",
        institution: "ChangXian Intelligence / Chongqing University of Posts and Telecommunications<br>长线智能 / 重庆邮电大学",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "NJVLab",
        primary: "0.3218",
        metric1: "0.3154",
        metric2: "0.6202",
        country: "CN",
        institution: "Nanjing University of Science and Technology<br>南京理工大学",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "xyq019971",
        primary: "0.3048",
        metric1: "0.2952",
        metric2: "0.6088",
        country: "-",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "HCMUT",
        primary: "0.2600",
        metric1: "0.2521",
        metric2: "0.6688",
        country: "VN",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "beintelli",
        primary: "0.2585",
        metric1: "0.2378",
        metric2: "0.5551",
        country: "-",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "SYI team",
        primary: "0.2566",
        metric1: "0.2403",
        metric2: "0.5965",
        country: "JP",
        institution: "The University of Tokyo",
        award: "blank",
        disqualified: true,
        links: ""
    },
    {
        team: "SYI team",
        primary: "0.2566",
        metric1: "0.2403",
        metric2: "0.5965",
        country: "JP",
        institution: "The University of Tokyo",
        award: "blank",
        disqualified: true,
        links: ""
    },
    {
        team: "Laoda24vsYaoxi",
        primary: "0.2497",
        metric1: "0.2314",
        metric2: "0.5854",
        country: "-",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "danking",
        primary: "0.2485",
        metric1: "0.2362",
        metric2: "0.6408",
        country: "-",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "Haobo Zhang",
        primary: "0.2479",
        metric1: "0.2344",
        metric2: "0.6302",
        country: "-",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "gouziwang1",
        primary: "0.2183",
        metric1: "0.2038",
        metric2: "0.6512",
        country: "-",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "CUMT",
        primary: "0.1940",
        metric1: "0.1785",
        metric2: "0.6659",
        country: "CN",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "RainbowJin",
        primary: "0.0884",
        metric1: "0.0559",
        metric2: "0.6192",
        country: "-",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "ClearLove7777",
        primary: "0.0018",
        metric1: "0.0020",
        metric2: "10.8684",
        country: "-",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "yuki",
        primary: "0.0015",
        metric1: "0.0017",
        metric2: "11.9385",
        country: "CN",
        institution: "-",
        award: "blank",
        disqualified: false,
        links: ""
    },
    {
        team: "UM-IT",
        primary: "0.4528",
        metric1: "0.4507",
        metric2: "0.5288",
        country: "MO",
        institution: "University of Macau / Inceptio Technology<br>澳门大学 / 嬴彻科技",
        award: "blank",
        disqualified: false,
        links: "<a href='https://opendrivelab.github.io/Challenge%202024/occ_UM-IT.pdf' target='_blank'><img class='inlineimg' src='/assets/icon/article.png'/></a>&nbsp;<a href='https://youtu.be/Xr2k-W3sAiM' target='_blank'><img class='inlineimg' src='/assets/icon/youtube.png'/></a>"
    }
];


let track3sortDirection = "asc";
track3data.sort((a, b) => b.primary - a.primary);
index = 0
track3data.forEach((item, xxx) => {
    if (item.disqualified) {
        item.rank = "*";
    } else {
        item.rank = index + 1;
        index = index + 1;
    }
});



let track3currentPage = 1;
let track3pageSize = 10;
let track3sortColumn = null;



function track3render() {
    const track3tableBody = document.getElementById("track3table");
    track3tableBody.innerHTML = "";
    track3data.slice((track3currentPage - 1) * track3pageSize, track3currentPage * track3pageSize).forEach((item, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `
            <td>${item.rank} <img src="/assets/icon/${item.award}.png" class="inlineflag"/></td>
            <td><img src="/assets/flags/${item.country}.svg" class="inlineflag"/> ${item.country}</td>
            <td>${item.institution}</td>
            <td><b>${item.primary}</b></td>
            <td>${item.team}</td>
            <td>${item.links}</td>
            <td>${item.metric1}</td>
            <td>${item.metric2}</td>
        `;
        track3tableBody.appendChild(row);
    });
    document.getElementById("track3pages").innerHTML = `<b>${track3currentPage} / ${Math.ceil(track3data.length / track3pageSize)}</b>`;

    if (window.innerWidth < 1024) {
        document.getElementById("track3tablefoot").style.width = document.getElementById("track3table").offsetWidth;
    }
}



function track3sort(columnIndex, columnKey) {
    if (track3sortColumn === columnKey) {
        track3sortDirection = track3sortDirection === "asc" ? "desc" : "asc";
    } else {
        track3sortColumn = columnKey;
        track3sortDirection = "asc";
    }
    track3updateSortIcons(columnIndex);
    track3data.sort((a, b) => {
        if (track3sortDirection === "asc") {
            return a[columnKey] - b[columnKey];
        } else {
            return b[columnKey] - a[columnKey];
        }
    });
    track3currentPage = 1;
    track3render();
}



function track3updateSortIcons(columnIndex) {
    const sortIcons = document.querySelectorAll(".track3button");
    sortIcons.forEach((icon, index) => {
        if (index === columnIndex) {
            if (track3sortDirection === "asc") {
                icon.innerHTML = icon.innerHTML.replace("&nbsp;&nbsp;&nbsp;", "▲");
                icon.innerHTML = icon.innerHTML.replace("▼", "▲");
            } else {
                icon.innerHTML = icon.innerHTML.replace("&nbsp;&nbsp;&nbsp;", "▼");
                icon.innerHTML = icon.innerHTML.replace("▲", "▼");
            }
        } else {
            icon.innerHTML = icon.innerHTML.replace("▼", "&nbsp;&nbsp;&nbsp;");
            icon.innerHTML = icon.innerHTML.replace("▲", "&nbsp;&nbsp;&nbsp;");
        }
    });
}



function track3previous() {
    if (track3currentPage > 1) {
        track3currentPage--;
        track3render();
    }
}



function track3next() {
    if (track3currentPage < Math.ceil(track3data.length / track3pageSize)) {
        track3currentPage++;
        track3render();
    }
}
